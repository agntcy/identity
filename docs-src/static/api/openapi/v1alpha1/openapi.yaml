# Generated with protoc-gen-openapi
# https://github.com/google/gnostic/tree/master/cmd/protoc-gen-openapi

openapi: 3.0.3
info:
    title: PyramID
    description: PyramID
    contact:
        name: Agntcy Team
        url: https://github.com/agntcy/pyramid
        email: pyramid@agntcy.org
    version: v1alpha1
servers:
    - url: http://0.0.0.0:4000
      description: Local environment
paths:
    /v1alpha1/credentials/publish:
        post:
            tags:
                - CredentialsService
            description: Publish
            operationId: CredentialsService_Publish
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/AgentPassport'
                required: true
            responses:
                "200":
                    description: OK
                    content: {}
                default:
                    description: Default error response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Status'
    /v1alpha1/id/generate:
        post:
            tags:
                - IdService
            description: Generate an Id
            operationId: IdService_Generate
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/AgentClaims'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AgentPassport'
                default:
                    description: Default error response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Status'
    /v1alpha1/id/resolve:
        post:
            tags:
                - IdService
            description: Resolve an Id
            operationId: IdService_Resolve
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/AgentClaims'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AgentPassport'
                default:
                    description: Default error response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Status'
    /v1alpha1/issuer/keygen:
        get:
            tags:
                - IssuerService
            description: Generate a keypair in JWK format
            operationId: IssuerService_KeyGen
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/JWK'
                default:
                    description: Default error response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Status'
    /v1alpha1/issuer/register:
        post:
            tags:
                - IssuerService
            description: Register
            operationId: IssuerService_Register
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/Issuer'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/RegisterResponse'
                default:
                    description: Default error response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Status'
    /v1alpha1/issuer/{commonName}/.well-known/id.json:
        get:
            tags:
                - IssuerService
            description: WellKnown endpoint
            operationId: IssuerService_WellKnown
            parameters:
                - name: commonName
                  in: path
                  description: The common name of the issuer
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/JWK'
                default:
                    description: Default error response
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Status'
components:
    schemas:
        AgentClaims:
            type: object
            properties:
                value:
                    type: string
                    description: The OASF in json format
            description: |-
                The Agent definition following OASF schema
                 Specs: https://schema.oasf.agntcy.org/schema/objects/agent
        AgentPassport:
            type: object
            properties:
                envelopeType:
                    enum:
                        - AGENT_PASSPORT_ENVELOPE_TYPE_UNSPECIFIED
                        - AGENT_PASSPORT_ENVELOPE_TYPE_JOSE
                    type: string
                    description: EnvelopeType specifies the type of the envelope used to store the passport.
                    format: enum
                value:
                    type: string
                    description: Value is the value of the passport.
            description: AgentPassport represents an identity passport for an agent.
        GoogleProtobufAny:
            type: object
            properties:
                '@type':
                    type: string
                    description: The type of the serialized message.
            additionalProperties: true
            description: Contains an arbitrary serialized message along with a @type that describes the type of the serialized message.
        Issuer:
            type: object
            properties:
                organization:
                    type: string
                    description: The organization of the issuer
                subOrganization:
                    type: string
                    description: The sub organization of the issuer
                commonName:
                    type: string
                    description: |-
                        The common name of the issuer
                         Could be a FQDN or a FQDA
                publicKey:
                    allOf:
                        - $ref: '#/components/schemas/JWK'
                    description: |-
                        The keys of the issuer in JWK format
                         The public key is used to verify the signature of the different claims
                privateKey:
                    allOf:
                        - $ref: '#/components/schemas/JWK'
                    description: The private key of the issuer in JWK format
            description: A PyramID Issuer
        JWK:
            type: object
            properties:
                alg:
                    type: string
                    description: ALG represents the algorithm intended for use with the key.
                kty:
                    type: string
                    description: |-
                        KTY represents the key type parameter.
                         It specifies the family of cryptographic algorithms used with the key,
                         such as "RSA" or "EC" for elliptic curve keys.
                crv:
                    type: string
                    description: |-
                        CRV represents the curve parameter for elliptic curve keys.
                         It specifies the cryptographic curve used with the key, such as "P-256" or "P-384".
                d:
                    type: string
                    description: |-
                        D represents the private key parameter.
                         This field is used to store the private key material for asymmetric keys.
                x:
                    type: string
                    description: |-
                        X represents the x-coordinate for elliptic curve keys.
                         This field is part of the public key material for elliptic curve cryptography (ECC).
                y:
                    type: string
                    description: |-
                        Y represents the y-coordinate for elliptic curve keys.
                         This field is part of the public key material for elliptic curve cryptography (ECC)
            description: |-
                JWK represents a JSON Web Key as per RFC7517 (https://tools.ietf.org/html/rfc7517)
                 Note that this is a subset of the spec. There are a handful of properties that the
                 spec allows for that are not represented here at the moment. This is because we
                 only need a subset of the spec for our purposes.
        RegisterResponse:
            type: object
            properties:
                uri:
                    type: string
                    description: A uri indicating an action to take to complete the registration.
        Status:
            type: object
            properties:
                code:
                    type: integer
                    description: The status code, which should be an enum value of [google.rpc.Code][google.rpc.Code].
                    format: int32
                message:
                    type: string
                    description: A developer-facing error message, which should be in English. Any user-facing error message should be localized and sent in the [google.rpc.Status.details][google.rpc.Status.details] field, or localized by the client.
                details:
                    type: array
                    items:
                        $ref: '#/components/schemas/GoogleProtobufAny'
                    description: A list of messages that carry the error details.  There is a common set of message types for APIs to use.
            description: 'The `Status` type defines a logical error model that is suitable for different programming environments, including REST APIs and RPC APIs. It is used by [gRPC](https://github.com/grpc). Each `Status` message contains three pieces of data: error code, error message, and error details. You can find out more about this error model and how to work with it in the [API Design Guide](https://cloud.google.com/apis/design/errors).'
    headers:
        "":
    securitySchemes: {}
security:
    - {}
tags:
    - name: CredentialsService
      description: CredentialsService is the service that provides VC operations.
    - name: IdService
      description: IdService is the service that provides ID operations.
    - name: IssuerService
      description: IssuerService is the service that provides ISSUER operations.
